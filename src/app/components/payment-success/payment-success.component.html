<div class="modal-overlay">
  <div class="modal-content" (click)="$event.stopPropagation()">
    
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="spinner"></div>
      <p>Loading payment details...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="!isLoading && errorMessage" class="error-state">
      <div class="error-icon">
        <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="48" fill="#EF4444" stroke="#DC2626" stroke-width="2"/>
          <path d="M35 35L65 65M35 65L65 35" stroke="white" stroke-width="5" stroke-linecap="round"/>
        </svg>
      </div>
      <h2>Error</h2>
      <p class="error-message">{{ errorMessage }}</p>
      <button class="btn-primary" (click)="goToHome()">Go to Home</button>
    </div>

    <!-- Success State -->
    <div *ngIf="!isLoading && !errorMessage">
      <!-- Success Icon with Animation -->
      <div class="success-icon-wrapper">
        <div class="success-icon">
          <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="48" fill="#10B981" stroke="#059669" stroke-width="2"/>
            <circle cx="50" cy="50" r="38" fill="#34D399" opacity="0.3"/>
            <path d="M30 50L43 63L70 36" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="success-circle"></div>
      </div>
      
      <!-- Success Message -->
      <h2>Payment Successful!</h2>
      <p class="success-subtitle">Your transaction has been completed successfully</p>
      
      <!-- Reservation Details Card (if available) -->
      <div class="reservation-details" *ngIf="reservation && isValidReservation">
        <h3 class="section-title">Reservation Details</h3>
        
        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            Guest Name
          </span>
          <span class="detail-value">{{ reservation.guest }}</span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            Reservation Number
          </span>
          <span class="detail-value">{{ reservation.resNo }}</span>
        </div>

        <div class="detail-row" *ngIf="reservation.confirmationNo">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
            </svg>
            Confirmation Number
          </span>
          <span class="detail-value">{{ reservation.confirmationNo }}</span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            Check-in
          </span>
          <span class="detail-value">{{ reservation.checkIn }}</span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            Check-out
          </span>
          <span class="detail-value">{{ reservation.checkOut }}</span>
        </div>

        <div class="detail-row" *ngIf="paymentInfo?.description">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
            </svg>
            Description
          </span>
          <span class="detail-value">{{ paymentInfo.description }}</span>
        </div>
      </div>

      <!-- Payment Details Card -->
      <div class="payment-details">
        <h3 class="section-title">Payment Details</h3>
        
        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Amount Paid
          </span>
          <span class="detail-value amount">â‚¹{{ getFormattedAmount() }}</span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
              <line x1="1" y1="10" x2="23" y2="10"/>
            </svg>
            Payment Method
          </span>
          <span class="detail-value">{{ getPaymentMethod() }}</span>
        </div>

        <div class="detail-row" *ngIf="getBankName() !== 'N/A'">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
              <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
            Bank
          </span>
          <span class="detail-value">{{ getBankName() }}</span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            Payment ID
          </span>
          <span class="detail-value clickable" (click)="copyToClipboard(paymentId)" title="Click to copy">
            {{ paymentId }}
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
            </svg>
          </span>
        </div>
        
        <div class="detail-row" *ngIf="paymentLinkId">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/>
            </svg>
            Payment Link ID
          </span>
          <span class="detail-value clickable" (click)="copyToClipboard(paymentLinkId)" title="Click to copy">
            {{ paymentLinkId }}
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
            </svg>
          </span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            Payment Time
          </span>
          <span class="detail-value">{{ getTransactionTime() }}</span>
        </div>

        <div class="detail-row">
          <span class="detail-label">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Status
          </span>
          <span class="detail-value">
            <span [class]="getStatusClass()">{{ getStatusText() }}</span>
          </span>
        </div>
      </div>
    
    </div>
  
  </div>
</div>