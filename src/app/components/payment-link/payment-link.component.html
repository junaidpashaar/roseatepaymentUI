<div class="payment-page">
  
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading payment details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && errorMessage" class="error-container">
    <div class="error-box">
      <div class="error-icon">
        <svg width="80" height="80" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="48" fill="#FEE2E2" stroke="#EF4444" stroke-width="2"/>
          <path d="M35 35L65 65M35 65L65 35" stroke="#EF4444" stroke-width="5" stroke-linecap="round"/>
        </svg>
      </div>
      <h2>Payment Not Available</h2>
      <p class="error-message">{{ errorMessage }}</p>
      <button class="btn-primary" (click)="goToHome()">Return to Home</button>
    </div>
  </div>

  <!-- Payment Page Content -->
  <div *ngIf="!isLoading && !errorMessage && paymentLinkData" class="payment-container">
    
    <!-- Payment Frame -->
    <div class="payment-frame-container">
      
      <div class="iframe-wrapper" *ngIf="showPaymentFrame">
        <iframe 
          [src]="paymentLinkData.short_url | safe: 'resourceUrl'"
          frameborder="0"
          allowpaymentrequest
          class="payment-iframe">
        </iframe>
      </div>

      <!-- Payment Success Overlay -->
      <div *ngIf="paymentCompleted" class="success-overlay">
        <div class="success-content">
          <div class="success-icon">
            <svg width="60" height="60" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="50" cy="50" r="48" fill="#10B981"/>
              <path d="M30 50L43 63L70 36" stroke="white" stroke-width="5" stroke-linecap="round"/>
            </svg>
          </div>
          <h3>Payment Successful!</h3>
          <p>Redirecting to confirmation page...</p>
        </div>
      </div>
    </div>

  </div>

</div>